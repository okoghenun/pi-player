var Song=function(t){this.id="s"+guid(),this.meta={},t&&t.id?(this.id=t.id,this.meta=t.meta):t&&(this.file=t,this.meta=this.getMeta(t),cStore.save(this.id,this.getFile()))};Song.getMeta=function(t){var e={};if(id3(t,function(t,i){e.title=i.title||i.v2.title,e.album=i.album||i.v2.album,e.artist=i.artist||i.v2.artist,e.genre=i.genre||i.v2.genre,e.duration=i.duration||i.v2.duration,e.year=i.year||i.v2.year}),!e.duration){var i;i=URL.createObjectURL(t);var r=document.createElement("audio");r.addEventListener("canplaythrough",function(t){e.duration=t.currentTarget.duration,URL.revokeObjectURL(i)}),r.setAttribute("src",i)}return e},Song.prototype.getID=function(){return this.id},Song.prototype.getFile=function(){return this.file},Song.prototype.toJSON=function(){var t;return t.id=this.id,t.meta=this.meta,t};