window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var ClientStore=function(){if(window.requestFileSystem){var e=this;e.filesystem=null,navigator.webkitPersistentStorage.requestQuota(314572800,function(r){window.requestFileSystem(window.TEMPORARY,r,function(r){e.filesystem=r,e.getList()},e.errorHandler)},e.errorHandler)}else console.error("Sorry! Your browser doesn't support the FileSystem API :(")};ClientStore.prototype.errorHandler=function(e){var r="";switch(e.code){case FileError.SECURITY_ERR:r="Security Error";break;case FileError.NOT_FOUND_ERR:r="Not Found Error";break;case FileError.QUOTA_EXCEEDED_ERR:r="Quota Exceeded Error";break;case FileError.INVALID_MODIFICATION_ERR:r="Invalid Modification Error";break;case FileError.INVALID_STATE_ERR:r="Invalid State Error";break;default:r="Unknown Error"}console.log(r)},ClientStore.prototype.save=function(e,r,t){var o=this,n=t||"audio/mpeg";o.filesystem.root.getFile(e,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=function(){o.getList()},e.onerror=function(e){console.error("Write error: "+e.toString())};var t=new Blob([r],{type:n});e.write(t)},o.errorHandler)},o.errorHandler)},ClientStore.prototype.load=function(e,r){var t=this;r=r||function(){},t.filesystem.root.getFile(e,{},function(e){e.file(function(e){r(e)},t.errorHandler)},t.errorHandler)},ClientStore.prototype.delete=function(e,r){var t=this;r=r||function(){},t.filesystem.root.getFile(e,{create:!1},function(e){e.remove(function(){t.getList(),r(!0)},t.errorHandler)},t.errorHandler)},ClientStore.prototype.getList=function(e){var r=this;e=e||function(){};var t=r.filesystem.root.createReader(),o=[],n=function(){t.readEntries(function(r){return r.length?(o=o.concat(r),n(),void 0):(e(o),o)},r.errorHandler)};n()};var cStore=new ClientStore;